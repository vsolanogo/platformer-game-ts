!function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){e.exports=t("./lib/heap")},{"./lib/heap":2}],2:[function(t,e,i){(function(){var t,i,n,r,o,a,s,l,h,u,p,c,d,f,g;n=Math.floor,u=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},h=function(t,e,r,o,a){var s;if(null==r&&(r=0),null==a&&(a=i),r<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);r<o;)a(e,t[s=n((r+o)/2)])<0?o=s:r=s+1;return[].splice.apply(t,[r,r-r].concat(e)),e},a=function(t,e,n){return null==n&&(n=i),t.push(e),f(t,0,t.length-1,n)},o=function(t,e){var n,r;return null==e&&(e=i),n=t.pop(),t.length?(r=t[0],t[0]=n,g(t,0,e)):r=n,r},l=function(t,e,n){var r;return null==n&&(n=i),r=t[0],t[0]=e,g(t,0,n),r},s=function(t,e,n){var r;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],g(t,0,n)),e},r=function(t,e){var r,o,a,s,l,h;for(null==e&&(e=i),s=function(){h=[];for(var e=0,i=n(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)h.push(e);return h}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)r=s[o],l.push(g(t,r,e));return l},d=function(t,e,n){var r;if(null==n&&(n=i),-1!==(r=t.indexOf(e)))return f(t,0,r,n),g(t,r,n)},p=function(t,e,n){var o,a,l,h,u;if(null==n&&(n=i),!(a=t.slice(0,e)).length)return a;for(r(a,n),l=0,h=(u=t.slice(e)).length;l<h;l++)o=u[l],s(a,o,n);return a.sort(n).reverse()},c=function(t,e,n){var a,s,l,p,c,d,f,g,b;if(null==n&&(n=i),10*e<=t.length){if(!(l=t.slice(0,e).sort(n)).length)return l;for(s=l[l.length-1],p=0,d=(f=t.slice(e)).length;p<d;p++)n(a=f[p],s)<0&&(h(l,a,0,null,n),l.pop(),s=l[l.length-1]);return l}for(r(t,n),b=[],c=0,g=u(e,t.length);0<=g?c<g:c>g;0<=g?++c:--c)b.push(o(t,n));return b},f=function(t,e,n,r){var o,a,s;for(null==r&&(r=i),o=t[n];n>e&&r(o,a=t[s=n-1>>1])<0;)t[n]=a,n=s;return t[n]=o},g=function(t,e,n){var r,o,a,s,l;for(null==n&&(n=i),o=t.length,l=e,a=t[e],r=2*e+1;r<o;)(s=r+1)<o&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=a,f(t,l,e,n)},t=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=r,t.updateItem=d,t.nlargest=p,t.nsmallest=c,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return r(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return d(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(null!=e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)},{}],3:[function(t,e,i){e.exports=t("./src/PathFinding")},{"./src/PathFinding":4}],4:[function(t,e,i){e.exports={Heap:t("heap"),Node:t("./core/Node"),Grid:t("./core/Grid"),Util:t("./core/Util"),DiagonalMovement:t("./core/DiagonalMovement"),Heuristic:t("./core/Heuristic"),AStarFinder:t("./finders/AStarFinder"),BestFirstFinder:t("./finders/BestFirstFinder"),BreadthFirstFinder:t("./finders/BreadthFirstFinder"),DijkstraFinder:t("./finders/DijkstraFinder"),BiAStarFinder:t("./finders/BiAStarFinder"),BiBestFirstFinder:t("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:t("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:t("./finders/BiDijkstraFinder"),IDAStarFinder:t("./finders/IDAStarFinder"),JumpPointFinder:t("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":5,"./core/Grid":6,"./core/Heuristic":7,"./core/Node":8,"./core/Util":9,"./finders/AStarFinder":10,"./finders/BestFirstFinder":11,"./finders/BiAStarFinder":12,"./finders/BiBestFirstFinder":13,"./finders/BiBreadthFirstFinder":14,"./finders/BiDijkstraFinder":15,"./finders/BreadthFirstFinder":16,"./finders/DijkstraFinder":17,"./finders/IDAStarFinder":18,"./finders/JumpPointFinder":23,heap:1}],5:[function(t,e,i){e.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],6:[function(t,e,i){var n=t("./Node"),r=t("./DiagonalMovement");function o(t,e,i){var n;"object"!=typeof t?n=t:(e=t.length,n=t[0].length,i=t),this.width=n,this.height=e,this.nodes=this._buildNodes(n,e,i)}o.prototype._buildNodes=function(t,e,i){var r,o,a=new Array(e);for(r=0;r<e;++r)for(a[r]=new Array(t),o=0;o<t;++o)a[r][o]=new n(o,r);if(void 0===i)return a;if(i.length!==e||i[0].length!==t)throw new Error("Matrix size does not fit");for(r=0;r<e;++r)for(o=0;o<t;++o)i[r][o]&&(a[r][o].walkable=!1);return a},o.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},o.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},o.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},o.prototype.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},o.prototype.getNeighbors=function(t,e){var i=t.x,n=t.y,o=[],a=!1,s=!1,l=!1,h=!1,u=!1,p=!1,c=!1,d=!1,f=this.nodes;if(this.isWalkableAt(i,n-1)&&(o.push(f[n-1][i]),a=!0),this.isWalkableAt(i+1,n)&&(o.push(f[n][i+1]),l=!0),this.isWalkableAt(i,n+1)&&(o.push(f[n+1][i]),u=!0),this.isWalkableAt(i-1,n)&&(o.push(f[n][i-1]),c=!0),e===r.Never)return o;if(e===r.OnlyWhenNoObstacles)s=c&&a,h=a&&l,p=l&&u,d=u&&c;else if(e===r.IfAtMostOneObstacle)s=c||a,h=a||l,p=l||u,d=u||c;else{if(e!==r.Always)throw new Error("Incorrect value of diagonalMovement");s=!0,h=!0,p=!0,d=!0}return s&&this.isWalkableAt(i-1,n-1)&&o.push(f[n-1][i-1]),h&&this.isWalkableAt(i+1,n-1)&&o.push(f[n-1][i+1]),p&&this.isWalkableAt(i+1,n+1)&&o.push(f[n+1][i+1]),d&&this.isWalkableAt(i-1,n+1)&&o.push(f[n+1][i-1]),o},o.prototype.clone=function(){var t,e,i=this.width,r=this.height,a=this.nodes,s=new o(i,r),l=new Array(r);for(t=0;t<r;++t)for(l[t]=new Array(i),e=0;e<i;++e)l[t][e]=new n(e,t,a[t][e].walkable);return s.nodes=l,s},e.exports=o},{"./DiagonalMovement":5,"./Node":8}],7:[function(t,e,i){e.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var i=Math.SQRT2-1;return t<e?i*t+e:i*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},{}],8:[function(t,e,i){e.exports=function(t,e,i){this.x=t,this.y=e,this.walkable=void 0===i||i}},{}],9:[function(t,e,i){function n(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function r(t,e,i,n){var r,o,a,s,l,h,u=Math.abs,p=[];for(r=t<i?1:-1,o=e<n?1:-1,l=(a=u(i-t))-(s=u(n-e));p.push([t,e]),t!==i||e!==n;)(h=2*l)>-s&&(l-=s,t+=r),h<a&&(l+=a,e+=o);return p}i.backtrace=n,i.biBacktrace=function(t,e){var i=n(t),r=n(e);return i.concat(r.reverse())},i.pathLength=function(t){var e,i,n,r,o,a=0;for(e=1;e<t.length;++e)i=t[e-1],n=t[e],r=i[0]-n[0],o=i[1]-n[1],a+=Math.sqrt(r*r+o*o);return a},i.interpolate=r,i.expandPath=function(t){var e,i,n,o,a,s,l=[],h=t.length;if(h<2)return l;for(a=0;a<h-1;++a)for(e=t[a],i=t[a+1],o=(n=r(e[0],e[1],i[0],i[1])).length,s=0;s<o-1;++s)l.push(n[s]);return l.push(t[h-1]),l},i.smoothenPath=function(t,e){var i,n,o,a,s,l,h,u,p,c=e.length,d=e[0][0],f=e[0][1],g=e[c-1][0],b=e[c-1][1];for(o=[[i=d,n=f]],a=2;a<c;++a){for(h=r(i,n,(l=e[a])[0],l[1]),p=!1,s=1;s<h.length;++s)if(u=h[s],!t.isWalkableAt(u[0],u[1])){p=!0;break}p&&(lastValidCoord=e[a-1],o.push(lastValidCoord),i=lastValidCoord[0],n=lastValidCoord[1])}return o.push([g,b]),o},i.compressPath=function(t){if(t.length<3)return t;var e,i,n,r,o,a,s=[],l=t[0][0],h=t[0][1],u=t[1][0],p=t[1][1],c=u-l,d=p-h;for(c/=o=Math.sqrt(c*c+d*d),d/=o,s.push([l,h]),a=2;a<t.length;a++)e=u,i=p,n=c,r=d,c=(u=t[a][0])-e,d=(p=t[a][1])-i,d/=o=Math.sqrt(c*c+d*d),(c/=o)===n&&d===r||s.push([e,i]);return s.push([u,p]),s}},{}],10:[function(t,e,i){var n=t("heap"),r=t("../core/Util"),o=t("../core/Heuristic"),a=t("../core/DiagonalMovement");function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||o.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||o.manhattan:this.heuristic=t.heuristic||o.octile}s.prototype.findPath=function(t,e,i,o,a){var s,l,h,u,p,c,d,f,g=new n((function(t,e){return t.f-e.f})),b=a.getNodeAt(t,e),v=a.getNodeAt(i,o),A=this.heuristic,m=this.diagonalMovement,y=this.weight,k=Math.abs,M=Math.SQRT2;for(b.g=0,b.f=0,g.push(b),b.opened=!0;!g.empty();){if((s=g.pop()).closed=!0,s===v)return r.backtrace(v);for(u=0,p=(l=a.getNeighbors(s,m)).length;u<p;++u)(h=l[u]).closed||(c=h.x,d=h.y,f=s.g+(c-s.x==0||d-s.y==0?1:M),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||y*A(k(c-i),k(d-o)),h.f=h.g+h.h,h.parent=s,h.opened?g.updateItem(h):(g.push(h),h.opened=!0)))}return[]},e.exports=s},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],11:[function(t,e,i){var n=t("./AStarFinder");function r(t){n.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./AStarFinder":10}],12:[function(t,e,i){var n=t("heap"),r=t("../core/Util"),o=t("../core/Heuristic"),a=t("../core/DiagonalMovement");function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||o.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||o.manhattan:this.heuristic=t.heuristic||o.octile}s.prototype.findPath=function(t,e,i,o,a){var s,l,h,u,p,c,d,f,g=function(t,e){return t.f-e.f},b=new n(g),v=new n(g),A=a.getNodeAt(t,e),m=a.getNodeAt(i,o),y=this.heuristic,k=this.diagonalMovement,M=this.weight,W=Math.abs,N=Math.SQRT2;for(A.g=0,A.f=0,b.push(A),A.opened=1,m.g=0,m.f=0,v.push(m),m.opened=2;!b.empty()&&!v.empty();){for((s=b.pop()).closed=!0,u=0,p=(l=a.getNeighbors(s,k)).length;u<p;++u)if(!(h=l[u]).closed){if(2===h.opened)return r.biBacktrace(s,h);c=h.x,d=h.y,f=s.g+(c-s.x==0||d-s.y==0?1:N),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||M*y(W(c-i),W(d-o)),h.f=h.g+h.h,h.parent=s,h.opened?b.updateItem(h):(b.push(h),h.opened=1))}for((s=v.pop()).closed=!0,u=0,p=(l=a.getNeighbors(s,k)).length;u<p;++u)if(!(h=l[u]).closed){if(1===h.opened)return r.biBacktrace(h,s);c=h.x,d=h.y,f=s.g+(c-s.x==0||d-s.y==0?1:N),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||M*y(W(c-t),W(d-e)),h.f=h.g+h.h,h.parent=s,h.opened?v.updateItem(h):(v.push(h),h.opened=2))}}return[]},e.exports=s},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],13:[function(t,e,i){var n=t("./BiAStarFinder");function r(t){n.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./BiAStarFinder":12}],14:[function(t,e,i){var n=t("../core/Util"),r=t("../core/DiagonalMovement");function o(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}o.prototype.findPath=function(t,e,i,r,o){var a,s,l,h,u,p=o.getNodeAt(t,e),c=o.getNodeAt(i,r),d=[],f=[],g=this.diagonalMovement;for(d.push(p),p.opened=!0,p.by=0,f.push(c),c.opened=!0,c.by=1;d.length&&f.length;){for((l=d.shift()).closed=!0,h=0,u=(a=o.getNeighbors(l,g)).length;h<u;++h)if(!(s=a[h]).closed)if(s.opened){if(1===s.by)return n.biBacktrace(l,s)}else d.push(s),s.parent=l,s.opened=!0,s.by=0;for((l=f.shift()).closed=!0,h=0,u=(a=o.getNeighbors(l,g)).length;h<u;++h)if(!(s=a[h]).closed)if(s.opened){if(0===s.by)return n.biBacktrace(s,l)}else f.push(s),s.parent=l,s.opened=!0,s.by=1}return[]},e.exports=o},{"../core/DiagonalMovement":5,"../core/Util":9}],15:[function(t,e,i){var n=t("./BiAStarFinder");function r(t){n.call(this,t),this.heuristic=function(t,e){return 0}}r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./BiAStarFinder":12}],16:[function(t,e,i){var n=t("../core/Util"),r=t("../core/DiagonalMovement");function o(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never)}o.prototype.findPath=function(t,e,i,r,o){var a,s,l,h,u,p=[],c=this.diagonalMovement,d=o.getNodeAt(t,e),f=o.getNodeAt(i,r);for(p.push(d),d.opened=!0;p.length;){if((l=p.shift()).closed=!0,l===f)return n.backtrace(f);for(h=0,u=(a=o.getNeighbors(l,c)).length;h<u;++h)(s=a[h]).closed||s.opened||(p.push(s),s.opened=!0,s.parent=l)}return[]},e.exports=o},{"../core/DiagonalMovement":5,"../core/Util":9}],17:[function(t,e,i){var n=t("./AStarFinder");function r(t){n.call(this,t),this.heuristic=function(t,e){return 0}}r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./AStarFinder":10}],18:[function(t,e,i){t("../core/Util");var n=t("../core/Heuristic"),r=t("../core/Node"),o=t("../core/DiagonalMovement");function a(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||n.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=t.heuristic||n.manhattan:this.heuristic=t.heuristic||n.octile}a.prototype.findPath=function(t,e,i,n,o){var a,s,l,h=(new Date).getTime(),u=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),p=function(t,e,i,n,a){if(this.timeLimit>0&&(new Date).getTime()-h>1e3*this.timeLimit)return 1/0;var s,l,c,f,g=e+u(t,d)*this.weight;if(g>i)return g;if(t==d)return n[a]=[t.x,t.y],t;var b,v,A=o.getNeighbors(t,this.diagonalMovement);for(c=0,s=1/0;f=A[c];++c){if(this.trackRecursion&&(f.retainCount=f.retainCount+1||1,!0!==f.tested&&(f.tested=!0)),(l=p(f,e+(v=f,(b=t).x===v.x||b.y===v.y?1:Math.SQRT2),i,n,a+1))instanceof r)return n[a]=[t.x,t.y],l;this.trackRecursion&&0==--f.retainCount&&(f.tested=!1),l<s&&(s=l)}return s}.bind(this),c=o.getNodeAt(t,e),d=o.getNodeAt(i,n),f=u(c,d);for(a=0;;++a){if((l=p(c,0,f,s=[],0))===1/0)return[];if(l instanceof r)return s;f=l}return[]},e.exports=a},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Node":8,"../core/Util":9}],19:[function(t,e,i){var n=t("./JumpPointFinderBase"),r=t("../core/DiagonalMovement");function o(t){n.call(this,t)}o.prototype=new n,o.prototype.constructor=o,o.prototype._jump=function(t,e,i,n){var r=this.grid,o=t-i,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(r.isWalkableAt(t-o,e+a)&&!r.isWalkableAt(t-o,e)||r.isWalkableAt(t+o,e-a)&&!r.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(r.isWalkableAt(t+o,e+1)&&!r.isWalkableAt(t,e+1)||r.isWalkableAt(t+o,e-1)&&!r.isWalkableAt(t,e-1))return[t,e]}else if(r.isWalkableAt(t+1,e+a)&&!r.isWalkableAt(t+1,e)||r.isWalkableAt(t-1,e+a)&&!r.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},o.prototype._findNeighbors=function(t){var e,i,n,o,a,s,l,h,u=t.parent,p=t.x,c=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),o=(c-i)/Math.max(Math.abs(c-i),1),0!==n&&0!==o?(d.isWalkableAt(p,c+o)&&f.push([p,c+o]),d.isWalkableAt(p+n,c)&&f.push([p+n,c]),d.isWalkableAt(p+n,c+o)&&f.push([p+n,c+o]),d.isWalkableAt(p-n,c)||f.push([p-n,c+o]),d.isWalkableAt(p,c-o)||f.push([p+n,c-o])):0===n?(d.isWalkableAt(p,c+o)&&f.push([p,c+o]),d.isWalkableAt(p+1,c)||f.push([p+1,c+o]),d.isWalkableAt(p-1,c)||f.push([p-1,c+o])):(d.isWalkableAt(p+n,c)&&f.push([p+n,c]),d.isWalkableAt(p,c+1)||f.push([p+n,c+1]),d.isWalkableAt(p,c-1)||f.push([p+n,c-1]));else for(l=0,h=(a=d.getNeighbors(t,r.Always)).length;l<h;++l)s=a[l],f.push([s.x,s.y]);return f},e.exports=o},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],20:[function(t,e,i){var n=t("./JumpPointFinderBase"),r=t("../core/DiagonalMovement");function o(t){n.call(this,t)}o.prototype=new n,o.prototype.constructor=o,o.prototype._jump=function(t,e,i,n){var r=this.grid,o=t-i,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(r.isWalkableAt(t-o,e+a)&&!r.isWalkableAt(t-o,e)||r.isWalkableAt(t+o,e-a)&&!r.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(r.isWalkableAt(t+o,e+1)&&!r.isWalkableAt(t,e+1)||r.isWalkableAt(t+o,e-1)&&!r.isWalkableAt(t,e-1))return[t,e]}else if(r.isWalkableAt(t+1,e+a)&&!r.isWalkableAt(t+1,e)||r.isWalkableAt(t-1,e+a)&&!r.isWalkableAt(t-1,e))return[t,e];return r.isWalkableAt(t+o,e)||r.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},o.prototype._findNeighbors=function(t){var e,i,n,o,a,s,l,h,u=t.parent,p=t.x,c=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),o=(c-i)/Math.max(Math.abs(c-i),1),0!==n&&0!==o?(d.isWalkableAt(p,c+o)&&f.push([p,c+o]),d.isWalkableAt(p+n,c)&&f.push([p+n,c]),(d.isWalkableAt(p,c+o)||d.isWalkableAt(p+n,c))&&f.push([p+n,c+o]),!d.isWalkableAt(p-n,c)&&d.isWalkableAt(p,c+o)&&f.push([p-n,c+o]),!d.isWalkableAt(p,c-o)&&d.isWalkableAt(p+n,c)&&f.push([p+n,c-o])):0===n?d.isWalkableAt(p,c+o)&&(f.push([p,c+o]),d.isWalkableAt(p+1,c)||f.push([p+1,c+o]),d.isWalkableAt(p-1,c)||f.push([p-1,c+o])):d.isWalkableAt(p+n,c)&&(f.push([p+n,c]),d.isWalkableAt(p,c+1)||f.push([p+n,c+1]),d.isWalkableAt(p,c-1)||f.push([p+n,c-1]));else for(l=0,h=(a=d.getNeighbors(t,r.IfAtMostOneObstacle)).length;l<h;++l)s=a[l],f.push([s.x,s.y]);return f},e.exports=o},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],21:[function(t,e,i){var n=t("./JumpPointFinderBase"),r=t("../core/DiagonalMovement");function o(t){n.call(this,t)}o.prototype=new n,o.prototype.constructor=o,o.prototype._jump=function(t,e,i,n){var r=this.grid,o=t-i,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(r.isWalkableAt(t,e-1)&&!r.isWalkableAt(t-o,e-1)||r.isWalkableAt(t,e+1)&&!r.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(r.isWalkableAt(t-1,e)&&!r.isWalkableAt(t-1,e-a)||r.isWalkableAt(t+1,e)&&!r.isWalkableAt(t+1,e-a)))return[t,e];return r.isWalkableAt(t+o,e)&&r.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},o.prototype._findNeighbors=function(t){var e,i,n,o,a,s,l,h,u,p=t.parent,c=t.x,d=t.y,f=this.grid,g=[];if(p){if(e=p.x,i=p.y,n=(c-e)/Math.max(Math.abs(c-e),1),o=(d-i)/Math.max(Math.abs(d-i),1),0!==n&&0!==o)f.isWalkableAt(c,d+o)&&g.push([c,d+o]),f.isWalkableAt(c+n,d)&&g.push([c+n,d]),f.isWalkableAt(c,d+o)&&f.isWalkableAt(c+n,d)&&g.push([c+n,d+o]);else if(0!==n){u=f.isWalkableAt(c+n,d);var b=f.isWalkableAt(c,d+1),v=f.isWalkableAt(c,d-1);u&&(g.push([c+n,d]),b&&g.push([c+n,d+1]),v&&g.push([c+n,d-1])),b&&g.push([c,d+1]),v&&g.push([c,d-1])}else if(0!==o){u=f.isWalkableAt(c,d+o);var A=f.isWalkableAt(c+1,d),m=f.isWalkableAt(c-1,d);u&&(g.push([c,d+o]),A&&g.push([c+1,d+o]),m&&g.push([c-1,d+o])),A&&g.push([c+1,d]),m&&g.push([c-1,d])}}else for(l=0,h=(a=f.getNeighbors(t,r.OnlyWhenNoObstacles)).length;l<h;++l)s=a[l],g.push([s.x,s.y]);return g},e.exports=o},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],22:[function(t,e,i){var n=t("./JumpPointFinderBase"),r=t("../core/DiagonalMovement");function o(t){n.call(this,t)}o.prototype=new n,o.prototype.constructor=o,o.prototype._jump=function(t,e,i,n){var r=this.grid,o=t-i,a=e-n;if(!r.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(r.getNodeAt(t,e).tested=!0),r.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(r.isWalkableAt(t,e-1)&&!r.isWalkableAt(t-o,e-1)||r.isWalkableAt(t,e+1)&&!r.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(r.isWalkableAt(t-1,e)&&!r.isWalkableAt(t-1,e-a)||r.isWalkableAt(t+1,e)&&!r.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},o.prototype._findNeighbors=function(t){var e,i,n,o,a,s,l,h,u=t.parent,p=t.x,c=t.y,d=this.grid,f=[];if(u)e=u.x,i=u.y,n=(p-e)/Math.max(Math.abs(p-e),1),o=(c-i)/Math.max(Math.abs(c-i),1),0!==n?(d.isWalkableAt(p,c-1)&&f.push([p,c-1]),d.isWalkableAt(p,c+1)&&f.push([p,c+1]),d.isWalkableAt(p+n,c)&&f.push([p+n,c])):0!==o&&(d.isWalkableAt(p-1,c)&&f.push([p-1,c]),d.isWalkableAt(p+1,c)&&f.push([p+1,c]),d.isWalkableAt(p,c+o)&&f.push([p,c+o]));else for(l=0,h=(a=d.getNeighbors(t,r.Never)).length;l<h;++l)s=a[l],f.push([s.x,s.y]);return f},e.exports=o},{"../core/DiagonalMovement":5,"./JumpPointFinderBase":24}],23:[function(t,e,i){var n=t("../core/DiagonalMovement"),r=t("./JPFNeverMoveDiagonally"),o=t("./JPFAlwaysMoveDiagonally"),a=t("./JPFMoveDiagonallyIfNoObstacles"),s=t("./JPFMoveDiagonallyIfAtMostOneObstacle");e.exports=function(t){return(t=t||{}).diagonalMovement===n.Never?new r(t):t.diagonalMovement===n.Always?new o(t):t.diagonalMovement===n.OnlyWhenNoObstacles?new a(t):new s(t)}},{"../core/DiagonalMovement":5,"./JPFAlwaysMoveDiagonally":19,"./JPFMoveDiagonallyIfAtMostOneObstacle":20,"./JPFMoveDiagonallyIfNoObstacles":21,"./JPFNeverMoveDiagonally":22}],24:[function(t,e,i){var n=t("heap"),r=t("../core/Util"),o=t("../core/Heuristic");t("../core/DiagonalMovement");function a(t){t=t||{},this.heuristic=t.heuristic||o.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}a.prototype.findPath=function(t,e,i,o,a){var s,l=this.openList=new n((function(t,e){return t.f-e.f})),h=this.startNode=a.getNodeAt(t,e),u=this.endNode=a.getNodeAt(i,o);for(this.grid=a,h.g=0,h.f=0,l.push(h),h.opened=!0;!l.empty();){if((s=l.pop()).closed=!0,s===u)return r.expandPath(r.backtrace(u));this._identifySuccessors(s)}return[]},a.prototype._identifySuccessors=function(t){var e,i,n,r,a,s,l,h,u,p,c=this.grid,d=this.heuristic,f=this.openList,g=this.endNode.x,b=this.endNode.y,v=t.x,A=t.y,m=Math.abs;Math.max;for(r=0,a=(e=this._findNeighbors(t)).length;r<a;++r)if(i=e[r],n=this._jump(i[0],i[1],v,A)){if(s=n[0],l=n[1],(p=c.getNodeAt(s,l)).closed)continue;h=o.octile(m(s-v),m(l-A)),u=t.g+h,(!p.opened||u<p.g)&&(p.g=u,p.h=p.h||d(m(s-g),m(l-b)),p.f=p.g+p.h,p.parent=t,p.opened?f.updateItem(p):(f.push(p),p.opened=!0))}},e.exports=a},{"../core/DiagonalMovement":5,"../core/Heuristic":7,"../core/Util":9,heap:1}],25:[function(t,e,i){const n=t("pathfinding");let r,o=new n.AStarFinder;const a=[];for(let t=0;t<800;t++){const t=new Array(1300).fill(0);a.push(t)}let s=new n.Grid(a);self.onmessage=t=>{console.log(t);const e=JSON.parse(t.data);r=s.clone();const i=o.findPath(e.playerXY.x,e.playerXY.y,e.enemyXY.x,e.enemyXY.y,s).reverse();s=r;var a=n.Util.smoothenPath(s,i),l=n.Util.expandPath(a);postMessage(JSON.stringify(l))}},{pathfinding:3}]},{},[25]);
